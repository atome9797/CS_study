## 4장. 컴퓨터 내부 구조 - 컴퓨터 하드웨어는 어떻게 구성되는가

> 전자 부품을 다양하게 조합해 비트를 조작하는 회로를 만드는 것을 컴퓨터 라고 한다.

> 현대적 컴퓨터는 메모리, 입력과 출력 , CPU 라는 세 가지 부분으로 나눌수 있다.

> 세 가지가 어떻게 연관되는지 살펴본다.

### 1. 메모리
```
    보통 메모리는 4바이트 덩어리로 64비트 컴퓨터는 메모리를 8바이트 덩어리로 구성한다.
    메모리 단위가 클수록 더 많은 데이터를 한번에 처리할수 있다.
    4바이트 긴 워드를 2바이트 워드 2개로 , 바이트 4개로 처리.
    => 즉 32비트 컴퓨터의 메모리는 데이터를 읽을때 4바이트 단위로 4개의 경로 단위로 처리한다.(64비트는 8개 경로)
    (32 비트 컴터 주소 : 0x00000005 에서 0x00은 00010101등의 8비트 정보, 주소 전체는 4*8비트 => 32비트 => 4바이트)
    (64 비트 컴터 주소 : 0x0000000000000005 에서 0x00은 00010101등의 8비트 정보, 주소 전체는 8*8비트 => 8바이트)

    int 형 주소를 사용하면 64비트 컴터는 0x0000000000000005 같은 주소를 가지게됨.
    => 주소는 8바이트고, 데이터 메모리는 4바이트임
    => 0x0000000000000009 로 이동할 수 있는 만큼이 4바이트임 => 그래서 int 주소가 4바이트 단위로 늘어나는거임


    * 메모리 주소 접근단위를 넘어가서 접근하면, [정렬에 맞지 않는 접근]이라고 부른다.

    * 리틀 엔디안 : 3 2 1 0 (읽는 순서가 <-) 
    * 빅 엔디안 : 0 1 2 3 (읽는 순서가 ->)
```

### 2. 입력과 출력

```
컴퓨터에 정보를 전달하거나 컴퓨터의 정보를 가져올려고 할때, 방법을 io장치라고 부른다.
```

### 3. 중앙 처리 장치 CPU
- 산술 논리 장치 ALU
    - 산술 계산, 불리언 대수, 기타 연산을 수행하는 방법을 알고 있는 장치.
    - 조건 코드 레지스터
        - 비트의 일부를 사용하지 않고 조건만 넣어줌
        - n z o 3개의 비트 사용
        - n 비트는 연산결과가 음수일경우 1로 설정
        - z 비트는 연산결과가 0인경우 1로 설정
        - o 비트는 연산에서 오버플로우나 언더 플로우 발생시 1로 설정
    - clr /set /not /neg /shl /shr /load /and /or /xor /add /sub /cmp
- 시프트
    - 비트를 왼쪽 오른쪽으로 이동시켜 2^1만큼 1/2만큼 이동하는 방법
- 실행 장치(제어 장치)
    - 명령코드와 피연산자(숫자)들을 가져와서 ALU에게 어떤 연산을 수행할지 알려주고 메모리에 결과를 돌려줌
    - 메모리에서 명령어를 가져와야 하는 위치는 [프로그램 카운터]를 사용한다.
        - 프로그램 카운터는 메모리 위치를 가리킴
        - 프로그램 카운터 크기가 증가 하면 메모리에서 명령어가 다음것으로 바뀜
### 4. 명령어 집합
- 명령어
    - 컴퓨터에게 어떤 일을 할지 알려주는 비트 패턴
    - 3주소 명령어 
        - 명령코드 + 피연산자 A + 피연산자 B + 결과
        - 3가지 메모리 위치를 한꺼번에 지정하는 메모리 주소 접근을 사용
        - 4클록이 필요하기에 사용안함
    - 누산기
        - cpu에서 논리 연산 결과가 저장되는 레지스터
    - 1주소 명령어
        - 명령코드(누산기에 저장하는 저장 명령어를 추가함) + 주소
        - 누산기에 ALU 가 계산한 결과를 실행장치를 통해 저장한다.
- 주소 지정 모드
    - 직접 주소 명령어는 주소가 명령어에 직접 들어가 있다는 뜻
    - 간접 주소 명령어를 추가하면 더 많은 메모리를 사용할수 있다. => 피연산자 주소를 얻을수 있는 메모리 위치를 가리키는 주소로 사용한다.
    - 상수를 지정할땐 즉시 주소 지정모드 사용
- 조건 코드 명령어
    - 덧셈,뺄셈,비교연산에서 조건코드가 설정된다.
- 분기 명령어
    - 프로그램 카운터는 순서대로 수행할수밖에 없기 때문에 , [분기명령어]를 사용하여 프로그램 카운터의 값을 변경한다.
    - bra bov beq bne bit ble bgt bge
- 최종 명령어 집합 구성
    - 주소 지정모드 3가지(직접,간접,즉시)로 프로그램 실행 
    - 피보나치 수열로 프로그램의 순서도가 이루어짐
### 5. 마지막 설계
- 명령어 레지스터
    - 메모리를 사용할때 폐치한 명령어에 편하게 접근할 수 있도록 저장할 다른 위치가 필요하다
    - 명령어 레지스터를 추가해서 현재 실행중인 명령어를 저장한다.
- 데이터 경로와 제어 신호
    - P.186참조
- 데이터 흐름 제어
    - 어떤 명령어든 처리하려면 폐치를 사용해야한다.
    - 폐치에 필요한 신호
        - address source는 프로그램 카운터를 선택해야 한다.
        - 메모리를 동작시켜야 한다.그리고 읽기로 설정해야 한다.
        - 명령어 레지스터를 동작시켜야 한다.
### 6. RISC와 CISC 명령어 집합
    - 프로그램의 실행시간을 대부분 차지하는 명령어를 단순한 명령어를 조합해 처리하는 기계를 RISC기계 라고 부른다.
    - 기존 설계 방식으로 만든 컴퓨터를 CISC기계라고 부른다.
    - C언어에 있는 포인터 는 간접주소 지정을 추상화 한것
### 7. GPU
    - 그래픽처리 장치
    - 
