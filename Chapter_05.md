## 5장. 컴퓨터 아키텍쳐와 운영체제  

> 메모리와 관련된 구조 개선을 다룬다.

> 멀티 태스킹에 대해서 살펴본다.

### 1. 기본적인 구조 요소들
    - 폰 노이만 구조 : 메모리 , 실행장치 , ALU(산술논리장치) , IO
    - 하버드 구조  : 명령어 메모리, 데이터 메모리, 실행장치, ALU(산술논리장치),IO
- 프로세서 코어
    -  CPU의 성능을 높이기 위해 멀티 프로세서 방식을 사용
    - 과거에 반도체 크키가 줄어들면서 속도는 빨라졌지만 전력소모가 많아지고, 녹는 현상(전력장벽)이 발생함. 사람들은 이 문제를 해결하기 위해 회로를 활용한 새로운 해결책을 찾아냈다.
    - CPU를 프로세서 코어 혹은 멀티코어 프로세서라고 부른다.
- 마이크로프로세서와 마이크로 컴퓨터
    - 마이크로프로세서 : 메모리와 I/O 가 프로세서코어와 같은 패키지에 있지 않은 프로세서
    - 마이크로 컴퓨터 : 모든 요소를 한 칩안에 패키징
    - 단일칩 시스템 (Soc) : wifi회로가 들어간 더 복잡한 마이크로 컴퓨터
### 2. 프로시저, 서브루틴, 함수
- 함수 (프로시저, 서브루틴) : 코드를 재사용하는 주요 수단
- 함수 호출시 명령어 집합을 통해 호출한다. (어셈블리어)
- ARM 프로세서는 함수 호출하는 명령어와 현재 명령어의 다음 위치를 지정하는 명령어를 하나로 합친것으로 함수호출을 도와준다.
### 3. 스택
- 압축 : 재귀 함수를 통해 트리 구조로 세분환한뒤 트리의 잎 노드 개수만큼 압축시키는 방법
- stack : 나중에 들어온주소가 먼저 나가는 방식. push pop으로 제어. 더이상 들어갈 공간이 없으면 스택 오버플로우 발생, 빈스택을경우 스택 언더플로우 발생
- 스택 프레임 : 재귀함수에서 함수가 호출될때 마다 스택에 저장되는 데이터의 모음을 스택 프레임이라고한다.
### 4. 인터럽트
- 적절한 신호가 들어오면 CPU실행을 잠깐 중단 시키는 핀이나 전기연결을 포함한다.
- CPU가 주의를 기울여야 하는 주변장치는 인터럽트 요청을 생성한다. 인터럽트 핸들러라는 함수 실행
- 서비스후 돌아올 프로그램의 위치를 스택에 저장한다. 이를 인터럽트 벡터라고 하며, 예외 발생시 인터럽트 핸들러 안에서 문제를 해결함으로써 오류가 생긴 프로그램이 계속 실행될수 있게 되기도한다.
### 5. 상대 주소 지정
- 여러 프로그램을 동시에 실행하려면 각 프로그램을 전환시켜줄 관리자 프로그램이 필요하다. 이런 프로그램을 운영체제 커널이라고 부른다.
- OS : 시스템 프로그램
- OS가 관리하는 프로그램 : 사용자 프로그램, 프로세스
- 시분할 기법으로 여러 프로그램을 메모리에넣는데, 메모리 주소를 읽는 방식을 상대 주소 지정방식 사용
    - 상대적으로 떨어진 거리를 계산하여 메모리의 원하는 위치로 재배치해줌
### 6. 메모리 관리 장치 (MMU)
- 오늘날의 대부분의 마이크로프로세서는 메모리 관리장치 (MMU)가 들어있다.
    - 프로그램은 가상주소를 MMU에 전달하고 MMU는 메모리에 물리주소를 전달한다.
### 7. 가상 메모리
- OS는 MMU를 사용해 사용자 프로그램에게 가상메모리를 제공한다.
- 요청받은 메모리가 물리적 메모리 보가 크면 OS는 메모리 페이지를 대용량 저장장치인 디스크에 옮긴다.(스왑 아웃)
### 8. 시스템 공간과 사용자 공간
- CPU에는 컴퓨터가 시스템 모드에 있는지 사용자 모드에 있는지 결정하는 비트가 레지스터안에 있음.
- 특별한 명령어를 통해 사용자 모드에서 실행중인 프로그램이 시스템 모드에 요청 보낼수 있음(시스템 콜 : 소아온)
### 9. 메모리 계층과 성능
- CPU와 메모리의 처리 속도가 다르기 때문에 RAM으로 이루어진 주 메모리는 프로세서보다 10배 느림
- 프로세서와 동일한 속도로 처리할수 있도록 캐시라는 하드웨어를 CPU에 추가한다. 
    - 캐시 메모리에도 계층이 존재하며, CPU에서 멀어질수록 캐시는 느려지고 커진다.
### 10. 코프로세서
- 과거에는 한 칩 안에 모든 연산회로를 넣기 어려웠기 때문에, 코프로세서가 쓰였다.
- 요즘은 그래픽 처리등 여러가지 기능을 담당하는 코프로세서가 한칩에 같이 들어가 잇는 경우가 많다.
### 11. 메모리상의 데이터 배치
- 스택, 힙, 정적데이터, 명령어
### 12. 프로그램 실행
- 프로그래머가 함수를 사용해 코드를 재사용 하기 위해 라이브러리를 만든다. 
- 여러 프로그램에서 같은 라이브러리를 사용하는 경우가 발생하여, 링커를 통해 공유라이브러리를 사용할수 있게 만들었음
- 프로그램이 실행될때 런타임 라이브러리 가 추가된다.(스택, 힙 영역 설정)

